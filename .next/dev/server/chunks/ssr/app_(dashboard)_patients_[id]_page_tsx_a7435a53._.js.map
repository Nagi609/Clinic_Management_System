{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/marienel/Downloads/clinic-management-system/app/%28dashboard%29/patients/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\nimport { LayoutWrapper } from \"@/components/layout-wrapper\"\r\nimport { ArrowLeft, Edit2, Phone, Mail, MapPin, Calendar, User, FileText } from \"lucide-react\"\r\nimport { useState, useEffect } from \"react\"\r\nimport { useRouter, useParams } from \"next/navigation\"\r\nimport { getCurrentUser, checkPermission } from \"@/lib/constants\"\r\n\r\n// Type definitions\r\ntype PatientRole = \"student\" | \"teaching_staff\" | \"non_teaching_staff\"\r\ntype Program = \"CICT\" | \"CBME\"\r\ntype StudentCourse = \"BSIT\" | \"BSCS\" | \"BSIS\" | \"BTVTED\"\r\ntype CBMECourse = \"BSA\" | \"BSAIS\" | \"BPA\" | \"BSE\"\r\ntype NonTeachingCategory = \"Administrative\" | \"Security\" | \"Maintenance\" | \"Support\" | \"Clinic\"\r\n\r\ninterface Patient {\r\n  id: string\r\n  firstName: string\r\n  middleName?: string\r\n  lastName: string\r\n  suffix?: string\r\n  dateOfBirth: string\r\n  gender: \"Male\" | \"Female\"\r\n  phone: string\r\n  email?: string\r\n  address?: string\r\n  role: PatientRole\r\n  idNumber: string\r\n  program?: Program\r\n  course?: StudentCourse | CBMECourse\r\n  yearLevel?: number\r\n  block?: number\r\n  department?: Program\r\n  staffCategory?: NonTeachingCategory\r\n  pastIllnesses?: string\r\n  surgeries?: string\r\n  currentMedication?: string\r\n  allergies?: string\r\n  medicalNotes?: string\r\n  primaryContactName?: string\r\n  primaryContactRelationship?: string\r\n  primaryContactPhone?: string\r\n  primaryContactAddress?: string\r\n  secondaryContactName?: string\r\n  secondaryContactRelationship?: string\r\n  secondaryContactPhone?: string\r\n  secondaryContactAddress?: string\r\n  attachments?: string\r\n}\r\n\r\nexport default function PatientDetailPage() {\r\n  const router = useRouter()\r\n  const params = useParams()\r\n  const patientId = params.id as string\r\n\r\n  // ðŸ”¹ Debugging log: patient ID\r\n  console.log(\"Patient ID from params:\", patientId)\r\n\r\n  const [patient, setPatient] = useState<Patient | null>(null)\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const [user, setUser] = useState<any>(null)\r\n\r\n  useEffect(() => {\r\n    const currentUser = getCurrentUser()\r\n    console.log(\"Current user:\", currentUser) // ðŸ”¹ Debugging log: current user\r\n    if (currentUser) setUser(currentUser)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (user && patientId) {\r\n      fetchPatient()\r\n    }\r\n  }, [user, patientId])\r\n\r\n  const fetchPatient = async () => {\r\n    if (!user || !patientId) return\r\n    try {\r\n      setIsLoading(true)\r\n      console.log(\"Fetching patient with ID:\", patientId) // ðŸ”¹ Debugging log\r\n\r\n      const response = await fetch(`/api/patients/${patientId}`, {\r\n        headers: { \"x-user-id\": user.id },\r\n      })\r\n\r\n      console.log(\"API response status:\", response.status) // ðŸ”¹ Debugging log\r\n\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        console.log(\"Patient data received:\", data.patient) // ðŸ”¹ Debugging log\r\n        setPatient(data.patient)\r\n      } else if (response.status === 404) {\r\n        console.warn(\"Patient not found, redirecting...\") // ðŸ”¹ Debugging log\r\n        router.push('/patients')\r\n      } else {\r\n        console.error(\"Unexpected response:\", await response.text()) // ðŸ”¹ Debugging log\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching patient:\", error)\r\n      router.push('/patients')\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  const canEditPatients = user && checkPermission(user.role, \"canEditPatients\")\r\n\r\n  // ... rest of your rendering code remains unchanged\r\n}\r\n"],"names":[],"mappings":";;;;AAKA;AACA;AACA;AAPA;;;;AAmDe,SAAS;IACtB,MAAM,SAAS,IAAA,8QAAS;IACxB,MAAM,SAAS,IAAA,8QAAS;IACxB,MAAM,YAAY,OAAO,EAAE;IAE3B,+BAA+B;IAC/B,QAAQ,GAAG,CAAC,2BAA2B;IAEvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gVAAQ,EAAiB;IACvD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,gVAAQ,EAAC;IAC3C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,gVAAQ,EAAM;IAEtC,IAAA,iVAAS,EAAC;QACR,MAAM,cAAc,IAAA,kIAAc;QAClC,QAAQ,GAAG,CAAC,iBAAiB,cAAa,iCAAiC;QAC3E,IAAI,aAAa,QAAQ;IAC3B,GAAG,EAAE;IAEL,IAAA,iVAAS,EAAC;QACR,IAAI,QAAQ,WAAW;YACrB;QACF;IACF,GAAG;QAAC;QAAM;KAAU;IAEpB,MAAM,eAAe;QACnB,IAAI,CAAC,QAAQ,CAAC,WAAW;QACzB,IAAI;YACF,aAAa;YACb,QAAQ,GAAG,CAAC,6BAA6B,YAAW,mBAAmB;YAEvE,MAAM,WAAW,MAAM,MAAM,CAAC,cAAc,EAAE,WAAW,EAAE;gBACzD,SAAS;oBAAE,aAAa,KAAK,EAAE;gBAAC;YAClC;YAEA,QAAQ,GAAG,CAAC,wBAAwB,SAAS,MAAM,GAAE,mBAAmB;YAExE,IAAI,SAAS,EAAE,EAAE;gBACf,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,QAAQ,GAAG,CAAC,0BAA0B,KAAK,OAAO,GAAE,mBAAmB;gBACvE,WAAW,KAAK,OAAO;YACzB,OAAO,IAAI,SAAS,MAAM,KAAK,KAAK;gBAClC,QAAQ,IAAI,CAAC,sCAAqC,mBAAmB;gBACrE,OAAO,IAAI,CAAC;YACd,OAAO;gBACL,QAAQ,KAAK,CAAC,wBAAwB,MAAM,SAAS,IAAI,KAAI,mBAAmB;YAClF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2BAA2B;YACzC,OAAO,IAAI,CAAC;QACd,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,kBAAkB,QAAQ,IAAA,mIAAe,EAAC,KAAK,IAAI,EAAE;AAE3D,oDAAoD;AACtD"}}]
}