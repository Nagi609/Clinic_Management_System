{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/marienel/Downloads/clinic-management-system/components/sidebar.tsx"],"sourcesContent":["\"use client\"\n\nimport Link from \"next/link\"\nimport { usePathname, useRouter } from \"next/navigation\"\nimport { Grid3x3, Users, FileText, Phone, LogOut } from \"lucide-react\"\n\nexport function Sidebar() {\n  const pathname = usePathname()\n  const router = useRouter()\n\n  const navItems = [\n    { href: \"/dashboard\", label: \"Dashboard\", icon: Grid3x3 },\n    { href: \"/patients\", label: \"Patients\", icon: Users },\n    { href: \"/visit-records\", label: \"Visit Records\", icon: FileText },\n    { href: \"/contacts\", label: \"Contacts\", icon: Phone },\n  ]\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"user\")\n    localStorage.removeItem(\"patients\")\n    localStorage.removeItem(\"visits\")\n    localStorage.removeItem(\"clinicContacts\")\n    router.push(\"/login\")\n  }\n\n  return (\n    <aside className=\"w-64 bg-white border-r border-gray-200 p-6 flex flex-col h-screen\">\n      <div className=\"mb-8\">\n        <div className=\"flex items-center gap-3 mb-2\">\n          <div className=\"w-10 h-10 bg-[#8B3A3A] rounded-lg flex items-center justify-center text-white font-bold\">\n            +\n          </div>\n          <div>\n            <h1 className=\"font-bold text-[#8B3A3A] text-lg\">SorSU Clinic</h1>\n            <p className=\"text-xs text-gray-500\">BULAN CAMPUS</p>\n          </div>\n        </div>\n      </div>\n\n      <nav className=\"space-y-2 flex-1\">\n        <p className=\"text-sm font-medium text-gray-400 px-4 mb-4\">Navigation</p>\n        {navItems.map((item) => {\n          const Icon = item.icon\n          const isActive = pathname === item.href\n          return (\n            <Link\n              key={item.href}\n              href={item.href}\n              className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${\n                isActive ? \"bg-[#8B3A3A] text-white\" : \"text-gray-700 hover:bg-gray-100\"\n              }`}\n            >\n              <Icon size={20} />\n              <span>{item.label}</span>\n            </Link>\n          )\n        })}\n      </nav>\n\n      <button\n        onClick={handleLogout}\n        className=\"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-red-50 hover:text-red-600 transition-colors w-full\"\n      >\n        <LogOut size={20} />\n        <span>Logout</span>\n      </button>\n    </aside>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAJA;;;;;AAMO,SAAS;IACd,MAAM,WAAW,IAAA,gRAAW;IAC5B,MAAM,SAAS,IAAA,8QAAS;IAExB,MAAM,WAAW;QACf;YAAE,MAAM;YAAc,OAAO;YAAa,MAAM,2SAAO;QAAC;QACxD;YAAE,MAAM;YAAa,OAAO;YAAY,MAAM,iSAAK;QAAC;QACpD;YAAE,MAAM;YAAkB,OAAO;YAAiB,MAAM,8SAAQ;QAAC;QACjE;YAAE,MAAM;YAAa,OAAO;YAAY,MAAM,iSAAK;QAAC;KACrD;IAED,MAAM,eAAe;QACnB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,6WAAC;QAAM,WAAU;;0BACf,6WAAC;gBAAI,WAAU;0BACb,cAAA,6WAAC;oBAAI,WAAU;;sCACb,6WAAC;4BAAI,WAAU;sCAA0F;;;;;;sCAGzG,6WAAC;;8CACC,6WAAC;oCAAG,WAAU;8CAAmC;;;;;;8CACjD,6WAAC;oCAAE,WAAU;8CAAwB;;;;;;;;;;;;;;;;;;;;;;;0BAK3C,6WAAC;gBAAI,WAAU;;kCACb,6WAAC;wBAAE,WAAU;kCAA8C;;;;;;oBAC1D,SAAS,GAAG,CAAC,CAAC;wBACb,MAAM,OAAO,KAAK,IAAI;wBACtB,MAAM,WAAW,aAAa,KAAK,IAAI;wBACvC,qBACE,6WAAC,sSAAI;4BAEH,MAAM,KAAK,IAAI;4BACf,WAAW,CAAC,+DAA+D,EACzE,WAAW,4BAA4B,mCACvC;;8CAEF,6WAAC;oCAAK,MAAM;;;;;;8CACZ,6WAAC;8CAAM,KAAK,KAAK;;;;;;;2BAPZ,KAAK,IAAI;;;;;oBAUpB;;;;;;;0BAGF,6WAAC;gBACC,SAAS;gBACT,WAAU;;kCAEV,6WAAC,wSAAM;wBAAC,MAAM;;;;;;kCACd,6WAAC;kCAAK;;;;;;;;;;;;;;;;;;AAId"}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/marienel/Downloads/clinic-management-system/components/header.tsx"],"sourcesContent":["\"use client\"\n\nimport { Search, User } from \"lucide-react\"\nimport { useState } from \"react\"\nimport Link from \"next/link\"\nimport { useRouter } from \"next/navigation\"\n\nexport function Header() {\n  const [searchOpen, setSearchOpen] = useState(false)\n  const [searchQuery, setSearchQuery] = useState(\"\")\n  const [profileOpen, setProfileOpen] = useState(false)\n  const router = useRouter()\n\n  const handleSignOut = () => {\n    localStorage.removeItem(\"user\")\n    localStorage.removeItem(\"patients\")\n    localStorage.removeItem(\"visits\")\n    localStorage.removeItem(\"clinicContacts\")\n    router.push(\"/login\")\n  }\n\n  const mockSearchResults = [\n    { id: 1, title: \"Justin Gojar\", type: \"Patient\", path: \"/patients\" },\n    { id: 2, title: \"Jecel Garbin\", type: \"Patient\", path: \"/patients\" },\n    { id: 3, title: \"Dashboard\", type: \"Page\", path: \"/dashboard\" },\n    { id: 4, title: \"Visit Records\", type: \"Page\", path: \"/visit-records\" },\n  ]\n\n  const filteredResults = searchQuery\n    ? mockSearchResults.filter((result) => result.title.toLowerCase().includes(searchQuery.toLowerCase()))\n    : []\n\n  return (\n    <header className=\"bg-white border-b border-gray-200 px-8 py-4 flex items-center justify-between\">\n      <div className=\"flex-1 max-w-md relative\">\n        <Search className=\"absolute left-3 top-3 text-gray-400\" size={20} />\n        <input\n          type=\"text\"\n          placeholder=\"Search...\"\n          value={searchQuery}\n          onChange={(e) => {\n            setSearchQuery(e.target.value)\n            setSearchOpen(true)\n          }}\n          onFocus={() => setSearchOpen(true)}\n          className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]\"\n        />\n        {searchOpen && searchQuery && (\n          <div className=\"absolute top-12 left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-50\">\n            {filteredResults.length > 0 ? (\n              filteredResults.map((result) => (\n                <Link\n                  key={result.id}\n                  href={result.path}\n                  onClick={() => {\n                    setSearchOpen(false)\n                    setSearchQuery(\"\")\n                  }}\n                  className=\"block px-4 py-3 hover:bg-gray-50 border-b last:border-b-0\"\n                >\n                  <p className=\"font-medium text-gray-900\">{result.title}</p>\n                  <p className=\"text-xs text-gray-500\">{result.type}</p>\n                </Link>\n              ))\n            ) : (\n              <div className=\"px-4 py-3 text-gray-500 text-sm\">Not found or not available</div>\n            )}\n          </div>\n        )}\n      </div>\n\n      <div className=\"flex items-center gap-6 ml-8\">\n        <div className=\"relative\">\n          <button\n            onClick={() => setProfileOpen(!profileOpen)}\n            className=\"w-10 h-10 bg-[#8B3A3A] rounded-full flex items-center justify-center text-white font-bold hover:bg-[#6D2E2E]\"\n          >\n            <User size={20} />\n          </button>\n          {profileOpen && (\n            <div className=\"absolute right-0 top-12 bg-white border border-gray-200 rounded-lg shadow-lg w-48\">\n              <Link href=\"/profile\" className=\"block px-4 py-2 hover:bg-gray-50 border-b\">\n                My Profile\n              </Link>\n              <button onClick={handleSignOut} className=\"w-full text-left px-4 py-2 hover:bg-gray-50 text-red-600\">\n                Sign Out\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </header>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;AACA;AALA;;;;;;AAOO,SAAS;IACd,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,gVAAQ,EAAC;IAC7C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,gVAAQ,EAAC;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,gVAAQ,EAAC;IAC/C,MAAM,SAAS,IAAA,8QAAS;IAExB,MAAM,gBAAgB;QACpB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,OAAO,IAAI,CAAC;IACd;IAEA,MAAM,oBAAoB;QACxB;YAAE,IAAI;YAAG,OAAO;YAAgB,MAAM;YAAW,MAAM;QAAY;QACnE;YAAE,IAAI;YAAG,OAAO;YAAgB,MAAM;YAAW,MAAM;QAAY;QACnE;YAAE,IAAI;YAAG,OAAO;YAAa,MAAM;YAAQ,MAAM;QAAa;QAC9D;YAAE,IAAI;YAAG,OAAO;YAAiB,MAAM;YAAQ,MAAM;QAAiB;KACvE;IAED,MAAM,kBAAkB,cACpB,kBAAkB,MAAM,CAAC,CAAC,SAAW,OAAO,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,YAAY,WAAW,OAChG,EAAE;IAEN,qBACE,6WAAC;QAAO,WAAU;;0BAChB,6WAAC;gBAAI,WAAU;;kCACb,6WAAC,oSAAM;wBAAC,WAAU;wBAAsC,MAAM;;;;;;kCAC9D,6WAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC;4BACT,eAAe,EAAE,MAAM,CAAC,KAAK;4BAC7B,cAAc;wBAChB;wBACA,SAAS,IAAM,cAAc;wBAC7B,WAAU;;;;;;oBAEX,cAAc,6BACb,6WAAC;wBAAI,WAAU;kCACZ,gBAAgB,MAAM,GAAG,IACxB,gBAAgB,GAAG,CAAC,CAAC,uBACnB,6WAAC,sSAAI;gCAEH,MAAM,OAAO,IAAI;gCACjB,SAAS;oCACP,cAAc;oCACd,eAAe;gCACjB;gCACA,WAAU;;kDAEV,6WAAC;wCAAE,WAAU;kDAA6B,OAAO,KAAK;;;;;;kDACtD,6WAAC;wCAAE,WAAU;kDAAyB,OAAO,IAAI;;;;;;;+BAT5C,OAAO,EAAE;;;;sDAalB,6WAAC;4BAAI,WAAU;sCAAkC;;;;;;;;;;;;;;;;;0BAMzD,6WAAC;gBAAI,WAAU;0BACb,cAAA,6WAAC;oBAAI,WAAU;;sCACb,6WAAC;4BACC,SAAS,IAAM,eAAe,CAAC;4BAC/B,WAAU;sCAEV,cAAA,6WAAC,8RAAI;gCAAC,MAAM;;;;;;;;;;;wBAEb,6BACC,6WAAC;4BAAI,WAAU;;8CACb,6WAAC,sSAAI;oCAAC,MAAK;oCAAW,WAAU;8CAA4C;;;;;;8CAG5E,6WAAC;oCAAO,SAAS;oCAAe,WAAU;8CAA2D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASnH"}},
    {"offset": {"line": 387, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/marienel/Downloads/clinic-management-system/components/layout-wrapper.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { Sidebar } from \"./sidebar\"\nimport { Header } from \"./header\"\n\nexport function LayoutWrapper({ children }: { children: React.ReactNode }) {\n  return (\n    <div className=\"flex h-screen bg-gray-50\">\n      <Sidebar />\n      <div className=\"flex-1 flex flex-col\">\n        <Header />\n        <main className=\"flex-1 overflow-y-auto p-8\">{children}</main>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAIA;AACA;AALA;;;;AAOO,SAAS,cAAc,EAAE,QAAQ,EAAiC;IACvE,qBACE,6WAAC;QAAI,WAAU;;0BACb,6WAAC,iIAAO;;;;;0BACR,6WAAC;gBAAI,WAAU;;kCACb,6WAAC,+HAAM;;;;;kCACP,6WAAC;wBAAK,WAAU;kCAA8B;;;;;;;;;;;;;;;;;;AAItD"}},
    {"offset": {"line": 440, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/marienel/Downloads/clinic-management-system/lib/constants.ts"],"sourcesContent":["export const ROLE_PERMISSIONS = {\n  student: {\n    canManagePatients: false,\n    canEditPatients: false,\n    canViewMonitoring: true,\n    canEditProfile: true,\n  },\n  clinic_staff: {\n    canManagePatients: true,\n    canEditPatients: true,\n    canViewMonitoring: true,\n    canEditProfile: true,\n  },\n  admin: {\n    canManagePatients: true,\n    canEditPatients: true,\n    canViewMonitoring: true,\n    canEditProfile: true,\n  },\n}\n\n/**\n * Get the currently logged-in user from localStorage\n * Returns null if no user is logged in\n */\nexport const getCurrentUser = () => {\n  if (typeof window === \"undefined\") return null\n  try {\n    const user = localStorage.getItem(\"user\")\n    return user ? JSON.parse(user) : null\n  } catch (error) {\n    console.error(\"Failed to parse user from localStorage:\", error)\n    return null\n  }\n}\n\n/**\n * Save user to localStorage securely\n */\nexport const setCurrentUser = (user: { id: string; role: string }) => {\n  if (typeof window === \"undefined\") return\n  localStorage.setItem(\"user\", JSON.stringify(user))\n}\n\n/**\n * Remove user from localStorage (logout)\n */\nexport const removeCurrentUser = () => {\n  if (typeof window === \"undefined\") return\n  localStorage.removeItem(\"user\")\n}\n\n/**\n * Check if the user's role has a specific permission\n */\nexport const checkPermission = (\n  role: string,\n  permission: keyof typeof ROLE_PERMISSIONS.student\n): boolean => {\n  return ROLE_PERMISSIONS[role as keyof typeof ROLE_PERMISSIONS]?.[permission] ?? false\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAO,MAAM,mBAAmB;IAC9B,SAAS;QACP,mBAAmB;QACnB,iBAAiB;QACjB,mBAAmB;QACnB,gBAAgB;IAClB;IACA,cAAc;QACZ,mBAAmB;QACnB,iBAAiB;QACjB,mBAAmB;QACnB,gBAAgB;IAClB;IACA,OAAO;QACL,mBAAmB;QACnB,iBAAiB;QACjB,mBAAmB;QACnB,gBAAgB;IAClB;AACF;AAMO,MAAM,iBAAiB;IAC5B,wCAAmC,OAAO;;;AAQ5C;AAKO,MAAM,iBAAiB,CAAC;IAC7B,wCAAmC;;;AAErC;AAKO,MAAM,oBAAoB;IAC/B,wCAAmC;;;AAErC;AAKO,MAAM,kBAAkB,CAC7B,MACA;IAEA,OAAO,gBAAgB,CAAC,KAAsC,EAAE,CAAC,WAAW,IAAI;AAClF"}},
    {"offset": {"line": 494, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/marienel/Downloads/clinic-management-system/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n\ninterface Activity {\n  id: number\n  type: \"visit\" | \"patient\"\n  message: string\n  time: string\n}\n\nexport function logActivity(type: \"visit\" | \"patient\", message: string) {\n  if (typeof window === \"undefined\") return\n\n  try {\n    const activitiesData = localStorage.getItem(\"activities\")\n    let activities: Activity[] = []\n\n    if (activitiesData) {\n      activities = JSON.parse(activitiesData)\n    }\n\n    const now = new Date()\n    const timeString = now.toLocaleTimeString(\"en-US\", {\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n      second: \"2-digit\",\n    })\n\n    const newActivity: Activity = {\n      id: Date.now(),\n      type,\n      message,\n      time: timeString,\n    }\n\n    activities.push(newActivity)\n    localStorage.setItem(\"activities\", JSON.stringify(activities))\n  } catch (error) {\n    console.error(\"Error logging activity:\", error)\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,oOAAO,EAAC,IAAA,8LAAI,EAAC;AACtB;AASO,SAAS,YAAY,IAAyB,EAAE,OAAe;IACpE,wCAAmC;;;AA6BrC"}},
    {"offset": {"line": 516, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/marienel/Downloads/clinic-management-system/app/%28dashboard%29/visit-records/page.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState, useEffect } from \"react\"\nimport { LayoutWrapper } from \"@/components/layout-wrapper\"\nimport { Plus, Search, Calendar, User, FileText, X } from \"lucide-react\"\nimport { getCurrentUser, checkPermission } from \"@/lib/constants\"\nimport { logActivity } from \"@/lib/utils\"\n\ninterface VisitRecord {\n  id: string\n  patientId: string\n  patientName: string\n  visitDate: string\n  reason: string\n  symptoms: string\n  treatment: string\n  notes?: string\n}\n\ninterface Patient {\n  id: string\n  name: string\n}\n\nexport default function VisitRecordsPage() {\n  const [visits, setVisits] = useState<VisitRecord[]>([])\n  const [patients, setPatients] = useState<Patient[]>([])\n  const [searchTerm, setSearchTerm] = useState(\"\")\n  const [sortBy, setSortBy] = useState(\"date\")\n  const [showAddForm, setShowAddForm] = useState(false)\n  const [editingId, setEditingId] = useState<string | null>(null)\n  const [newVisit, setNewVisit] = useState<Partial<VisitRecord>>({\n    patientId: \"\",\n    visitDate: new Date().toISOString().split(\"T\")[0],\n    reason: \"\",\n    symptoms: \"\",\n    treatment: \"\",\n    notes: \"\",\n  })\n  const [formErrors, setFormErrors] = useState<string[]>([])\n  const [user, setUser] = useState<any>(null)\n  const [isLoading, setIsLoading] = useState(true)\n\n  useEffect(() => {\n    const currentUser = getCurrentUser()\n    if (currentUser) setUser(currentUser)\n  }, [])\n\n  useEffect(() => {\n    if (user) {\n      fetchPatients()\n      fetchVisits()\n    }\n  }, [user])\n\n  const fetchPatients = async () => {\n    if (!user) return\n    try {\n      const response = await fetch(\"/api/patients\", {\n        headers: { \"x-user-id\": user.id },\n      })\n      if (response.ok) {\n        const data = await response.json()\n        setPatients(data.patients || [])\n      }\n    } catch (error) {\n      console.error(\"Error fetching patients:\", error)\n    }\n  }\n\n  const fetchVisits = async () => {\n    if (!user) return\n    try {\n      setIsLoading(true)\n      const response = await fetch(\"/api/visits\", {\n        headers: { \"x-user-id\": user.id },\n      })\n      if (response.ok) {\n        const data = await response.json()\n        setVisits(\n          data.visits?.map((v: any) => ({\n            id: v.id,\n            patientId: v.patientId,\n            patientName: v.patient?.name || \"Unknown Patient\",\n            visitDate: v.visitDate,\n            reason: v.reason,\n            symptoms: v.symptoms,\n            treatment: v.treatment,\n            notes: v.notes || \"\",\n          })) || []\n        )\n      }\n    } catch (error) {\n      console.error(\"Error fetching visits:\", error)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const canManageVisits = user && checkPermission(user.role, \"canManagePatients\")\n\n  const filteredVisits = visits\n    .filter(\n      (v) =>\n        v.patientName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        v.reason.toLowerCase().includes(searchTerm.toLowerCase())\n    )\n    .sort((a, b) => {\n      if (sortBy === \"date\") return new Date(b.visitDate).getTime() - new Date(a.visitDate).getTime()\n      if (sortBy === \"patient\") return a.patientName.localeCompare(b.patientName)\n      if (sortBy === \"reason\") return a.reason.localeCompare(b.reason)\n      return 0\n    })\n\n  const handleAddVisit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!canManageVisits) return\n\n    const errors: string[] = []\n    if (!newVisit.patientId?.trim()) errors.push(\"Patient selection is required\")\n    if (!newVisit.visitDate) errors.push(\"Visit date is required\")\n    if (!newVisit.reason?.trim()) errors.push(\"Reason for visit is required\")\n    if (!newVisit.symptoms?.trim()) errors.push(\"Symptoms description is required\")\n    if (!newVisit.treatment?.trim()) errors.push(\"Treatment information is required\")\n\n    if (errors.length > 0) {\n      setFormErrors(errors)\n      return\n    }\n\n    try {\n      if (editingId) {\n        const response = await fetch(\"/api/visits\", {\n          method: \"PUT\",\n          headers: { \"Content-Type\": \"application/json\", \"x-user-id\": user.id },\n          body: JSON.stringify({ id: editingId, ...newVisit }),\n        })\n        if (response.ok) {\n          logActivity(\"visit\", `Updated visit record`)\n          await fetchVisits()\n          setEditingId(null)\n        }\n      } else {\n        const selectedPatient = patients.find((p) => p.id === newVisit.patientId)\n        const response = await fetch(\"/api/visits\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\", \"x-user-id\": user.id },\n          body: JSON.stringify(newVisit),\n        })\n        if (response.ok) {\n          logActivity(\"visit\", `New visit recorded for ${selectedPatient?.name}`)\n          await fetchVisits()\n        }\n      }\n\n      setNewVisit({\n        patientId: \"\",\n        visitDate: new Date().toISOString().split(\"T\")[0],\n        reason: \"\",\n        symptoms: \"\",\n        treatment: \"\",\n        notes: \"\",\n      })\n      setShowAddForm(false)\n      setFormErrors([])\n    } catch (error) {\n      console.error(\"Error saving visit:\", error)\n      setFormErrors([\"Failed to save visit. Please try again.\"])\n    }\n  }\n\n  const handleEditVisit = (visit: VisitRecord) => {\n    if (!canManageVisits) return\n    setEditingId(visit.id)\n    setNewVisit({ ...visit })\n    setShowAddForm(true)\n  }\n\n  const handleDeleteVisit = async (id: string) => {\n    if (!confirm(\"Are you sure you want to delete this visit record?\")) return\n    try {\n      const response = await fetch(\"/api/visits\", {\n        method: \"DELETE\",\n        headers: { \"Content-Type\": \"application/json\", \"x-user-id\": user.id },\n        body: JSON.stringify({ id }),\n      })\n      if (response.ok) await fetchVisits()\n    } catch (error) {\n      console.error(\"Error deleting visit:\", error)\n    }\n  }\n\n  return (\n    <LayoutWrapper>\n      <div className=\"space-y-6\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-[#8B3A3A]\">Visit Records</h1>\n            <p className=\"text-gray-600\">Log and manage clinic visits</p>\n          </div>\n          {canManageVisits && (\n            <button\n              onClick={() => {\n                setShowAddForm(true)\n                setEditingId(null)\n                setNewVisit({\n                  patientId: \"\",\n                  visitDate: new Date().toISOString().split(\"T\")[0],\n                  reason: \"\",\n                  symptoms: \"\",\n                  treatment: \"\",\n                  notes: \"\",\n                })\n              }}\n              className=\"bg-[#8B3A3A] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#6D2E2E] transition-colors flex items-center gap-2\"\n            >\n              <Plus size={20} /> New Visit\n            </button>\n          )}\n        </div>\n\n        {/* Add Visit Form */}\n        {showAddForm && canManageVisits && (\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n            {/* Insert your form fields here */}\n          </div>\n        )}\n\n        {/* Search & Sort */}\n        <div className=\"bg-[#8B3A3A] rounded-xl p-6 flex gap-4\">\n          <div className=\"flex-1 relative\">\n            <Search className=\"absolute left-4 top-3 text-white opacity-60\" size={20} />\n            <input\n              type=\"text\"\n              placeholder=\"Search by patient name or reason...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-12 pr-4 py-2 bg-white/20 text-white placeholder-white/60 rounded-lg focus:outline-none focus:ring-2 focus:ring-white\"\n            />\n          </div>\n          <select\n            value={sortBy}\n            onChange={(e) => setSortBy(e.target.value)}\n            className=\"bg-white text-[#8B3A3A] px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-white font-medium cursor-pointer\"\n          >\n            <option value=\"date\">Sort by Date</option>\n            <option value=\"patient\">Sort by Patient</option>\n            <option value=\"reason\">Sort by Reason</option>\n          </select>\n        </div>\n\n        {/* Visit Records List */}\n        <div className=\"space-y-4\">\n          {filteredVisits.length > 0 ? (\n            filteredVisits.map((visit) => (\n              <div key={visit.id}>\n                <div className=\"bg-white rounded-t-xl shadow-sm border border-gray-200 border-b-0 overflow-hidden hover:shadow-md transition-shadow\">\n                  <div className=\"bg-[#8B3A3A] text-white p-6\">\n                    <div className=\"grid grid-cols-2 gap-4 mb-4\">\n                      <div>\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <User size={18} />\n                          <p className=\"text-sm font-semibold opacity-90\">Patient</p>\n                        </div>\n                        <p className=\"text-xl font-bold\">{visit.patientName}</p>\n                      </div>\n                      <div>\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <Calendar size={18} />\n                          <p className=\"text-sm font-semibold opacity-90\">Visit Date</p>\n                        </div>\n                        <p className=\"text-xl font-bold\">{new Date(visit.visitDate).toLocaleDateString()}</p>\n                      </div>\n                    </div>\n                    <div>\n                      <p className=\"text-sm font-semibold opacity-90 mb-1\">Reason</p>\n                      <p className=\"text-lg\">{visit.reason}</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))\n          ) : (\n            <div className=\"bg-white rounded-xl p-12 text-center\">\n              <FileText size={48} className=\"mx-auto text-gray-300 mb-4\" />\n              <p className=\"text-gray-500 text-lg\">No visit records found</p>\n            </div>\n          )}\n        </div>\n      </div>\n    </LayoutWrapper>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}