{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/marienel/Downloads/clinic-management-system/components/sidebar.tsx"],"sourcesContent":["\"use client\"\n\nimport Link from \"next/link\"\nimport { usePathname, useRouter } from \"next/navigation\"\nimport { Grid3x3, Users, FileText, Phone } from \"lucide-react\"\n\nexport function Sidebar() {\n  const pathname = usePathname()\n\n  const navItems = [\n    { href: \"/dashboard\", label: \"Dashboard\", icon: Grid3x3 },\n    { href: \"/patients\", label: \"Patients\", icon: Users },\n    { href: \"/visit-records\", label: \"Visit Records\", icon: FileText },\n    { href: \"/contacts\", label: \"Contacts\", icon: Phone },\n  ]\n\n  return (\n    <aside className=\"w-64 bg-white border-r border-gray-200 p-6 flex flex-col h-screen\">\n      <div className=\"mb-8\">\n        <div className=\"flex items-center gap-3 mb-2\">\n          <div className=\"w-10 h-10 bg-[#8B3A3A] rounded-lg flex items-center justify-center text-white font-bold\">\n            +\n          </div>\n          <div>\n            <h1 className=\"font-bold text-[#8B3A3A] text-lg\">SorSU Clinic</h1>\n            <p className=\"text-xs text-gray-500\">BULAN CAMPUS</p>\n          </div>\n        </div>\n      </div>\n\n      <nav className=\"space-y-2 flex-1\">\n        <p className=\"text-sm font-medium text-gray-400 px-4 mb-4\">Navigation</p>\n        {navItems.map((item) => {\n          const Icon = item.icon\n          const isActive = pathname === item.href\n          return (\n            <Link\n              key={item.href}\n              href={item.href}\n              className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${\n                isActive ? \"bg-[#8B3A3A] text-white\" : \"text-gray-700 hover:bg-gray-100\"\n              }`}\n            >\n              <Icon size={20} />\n              <span>{item.label}</span>\n            </Link>\n          )\n        })}\n      </nav>\n    </aside>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAJA;;;;;AAMO,SAAS;IACd,MAAM,WAAW,IAAA,gRAAW;IAE5B,MAAM,WAAW;QACf;YAAE,MAAM;YAAc,OAAO;YAAa,MAAM,2SAAO;QAAC;QACxD;YAAE,MAAM;YAAa,OAAO;YAAY,MAAM,iSAAK;QAAC;QACpD;YAAE,MAAM;YAAkB,OAAO;YAAiB,MAAM,8SAAQ;QAAC;QACjE;YAAE,MAAM;YAAa,OAAO;YAAY,MAAM,iSAAK;QAAC;KACrD;IAED,qBACE,6WAAC;QAAM,WAAU;;0BACf,6WAAC;gBAAI,WAAU;0BACb,cAAA,6WAAC;oBAAI,WAAU;;sCACb,6WAAC;4BAAI,WAAU;sCAA0F;;;;;;sCAGzG,6WAAC;;8CACC,6WAAC;oCAAG,WAAU;8CAAmC;;;;;;8CACjD,6WAAC;oCAAE,WAAU;8CAAwB;;;;;;;;;;;;;;;;;;;;;;;0BAK3C,6WAAC;gBAAI,WAAU;;kCACb,6WAAC;wBAAE,WAAU;kCAA8C;;;;;;oBAC1D,SAAS,GAAG,CAAC,CAAC;wBACb,MAAM,OAAO,KAAK,IAAI;wBACtB,MAAM,WAAW,aAAa,KAAK,IAAI;wBACvC,qBACE,6WAAC,sSAAI;4BAEH,MAAM,KAAK,IAAI;4BACf,WAAW,CAAC,+DAA+D,EACzE,WAAW,4BAA4B,mCACvC;;8CAEF,6WAAC;oCAAK,MAAM;;;;;;8CACZ,6WAAC;8CAAM,KAAK,KAAK;;;;;;;2BAPZ,KAAK,IAAI;;;;;oBAUpB;;;;;;;;;;;;;AAIR"}},
    {"offset": {"line": 151, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/marienel/Downloads/clinic-management-system/components/header.tsx"],"sourcesContent":["\"use client\"\n\nimport { User } from \"lucide-react\"\nimport { useState } from \"react\"\nimport Link from \"next/link\"\nimport { useRouter } from \"next/navigation\"\n\nexport function Header() {\n  const [profileOpen, setProfileOpen] = useState(false)\n  const router = useRouter()\n\n  const handleSignOut = () => {\n    localStorage.removeItem(\"user\")\n    localStorage.removeItem(\"patients\")\n    localStorage.removeItem(\"visits\")\n    localStorage.removeItem(\"clinicContacts\")\n    router.push(\"/login\")\n  }\n\n  return (\n    <header className=\"bg-white border-b border-gray-200 px-8 py-4 flex items-center justify-between\">\n      <div className=\"flex-1\"></div>\n\n      <div className=\"flex items-center gap-6\">\n        <div className=\"relative\">\n          <button\n            onClick={() => setProfileOpen(!profileOpen)}\n            className=\"w-10 h-10 bg-[#8B3A3A] rounded-full flex items-center justify-center text-white font-bold hover:bg-[#6D2E2E]\"\n          >\n            <User size={20} />\n          </button>\n          {profileOpen && (\n            <div className=\"absolute right-0 top-12 bg-white border border-gray-200 rounded-lg shadow-lg w-48\">\n              <Link href=\"/profile\" className=\"block px-4 py-2 hover:bg-gray-50 border-b\">\n                My Profile\n              </Link>\n              <button onClick={handleSignOut} className=\"w-full text-left px-4 py-2 hover:bg-gray-50 text-red-600\">\n                Sign Out\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </header>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOO,SAAS;IACd,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,gVAAQ,EAAC;IAC/C,MAAM,SAAS,IAAA,8QAAS;IAExB,MAAM,gBAAgB;QACpB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,6WAAC;QAAO,WAAU;;0BAChB,6WAAC;gBAAI,WAAU;;;;;;0BAEf,6WAAC;gBAAI,WAAU;0BACb,cAAA,6WAAC;oBAAI,WAAU;;sCACb,6WAAC;4BACC,SAAS,IAAM,eAAe,CAAC;4BAC/B,WAAU;sCAEV,cAAA,6WAAC,8RAAI;gCAAC,MAAM;;;;;;;;;;;wBAEb,6BACC,6WAAC;4BAAI,WAAU;;8CACb,6WAAC,sSAAI;oCAAC,MAAK;oCAAW,WAAU;8CAA4C;;;;;;8CAG5E,6WAAC;oCAAO,SAAS;oCAAe,WAAU;8CAA2D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASnH"}},
    {"offset": {"line": 255, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/marienel/Downloads/clinic-management-system/components/layout-wrapper.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { Sidebar } from \"./sidebar\"\nimport { Header } from \"./header\"\n\nexport function LayoutWrapper({ children }: { children: React.ReactNode }) {\n  return (\n    <div className=\"flex h-screen bg-gray-50\">\n      <Sidebar />\n      <div className=\"flex-1 flex flex-col\">\n        <Header />\n        <main className=\"flex-1 overflow-y-auto p-8\">{children}</main>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAIA;AACA;AALA;;;;AAOO,SAAS,cAAc,EAAE,QAAQ,EAAiC;IACvE,qBACE,6WAAC;QAAI,WAAU;;0BACb,6WAAC,iIAAO;;;;;0BACR,6WAAC;gBAAI,WAAU;;kCACb,6WAAC,+HAAM;;;;;kCACP,6WAAC;wBAAK,WAAU;kCAA8B;;;;;;;;;;;;;;;;;;AAItD"}},
    {"offset": {"line": 308, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/marienel/Downloads/clinic-management-system/app/%28dashboard%29/patients/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter, useParams } from \"next/navigation\";\r\nimport { LayoutWrapper } from \"@/components/layout-wrapper\";\r\nimport {\r\n  ArrowLeft,\r\n  Edit2,\r\n  Phone,\r\n  Mail,\r\n  MapPin,\r\n  Calendar,\r\n  User,\r\n} from \"lucide-react\";\r\nimport { getCurrentUser, checkPermission } from \"@/lib/constants\";\r\n\r\ntype PatientRole = \"student\" | \"teaching_staff\" | \"non_teaching_staff\";\r\ntype Program = \"CICT\" | \"CBME\";\r\ntype StudentCourse = \"BSIT\" | \"BSCS\" | \"BSIS\" | \"BTVTED\";\r\ntype CBMECourse = \"BSA\" | \"BSAIS\" | \"BPA\" | \"BSE\";\r\ntype NonTeachingCategory =\r\n  | \"Administrative\"\r\n  | \"Security\"\r\n  | \"Maintenance\"\r\n  | \"Support\"\r\n  | \"Clinic\";\r\n\r\ninterface Patient {\r\n  id: string;\r\n  firstName: string;\r\n  middleName?: string;\r\n  lastName: string;\r\n  suffix?: string;\r\n  dateOfBirth: string;\r\n  gender: \"Male\" | \"Female\";\r\n  phone: string;\r\n  email?: string;\r\n  address?: string;\r\n  role: PatientRole;\r\n  idNumber: string;\r\n  program?: Program;\r\n  course?: StudentCourse | CBMECourse;\r\n  yearLevel?: number;\r\n  block?: number;\r\n  department?: Program;\r\n  staffCategory?: NonTeachingCategory;\r\n  pastIllnesses?: string;\r\n  surgeries?: string;\r\n  currentMedication?: string;\r\n  allergies?: string;\r\n  medicalNotes?: string;\r\n  primaryContactName?: string;\r\n  primaryContactRelationship?: string;\r\n  primaryContactPhone?: string;\r\n  primaryContactAddress?: string;\r\n  secondaryContactName?: string;\r\n  secondaryContactRelationship?: string;\r\n  secondaryContactPhone?: string;\r\n  secondaryContactAddress?: string;\r\n}\r\n\r\nexport default function PatientDetailPage() {\r\n  const router = useRouter();\r\n  const params = useParams();\r\n  const patientId = params?.id as string | undefined;\r\n\r\n  const [patient, setPatient] = useState<Patient | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [user, setUser] = useState<any>(null);\r\n\r\n  useEffect(() => {\r\n    const currentUser = getCurrentUser();\r\n    if (!currentUser) {\r\n      console.warn(\"No current user, redirecting to /patients\");\r\n      router.push(\"/patients\");\r\n      return;\r\n    }\r\n    setUser(currentUser);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (user && patientId) {\r\n      fetchPatient();\r\n    }\r\n  }, [user, patientId]);\r\n\r\n  const fetchPatient = async () => {\r\n    if (!user || !patientId) return;\r\n\r\n    try {\r\n      setIsLoading(true);\r\n\r\n      console.log(\"Fetching patient with ID:\", patientId);\r\n\r\n      // âš  Make sure this matches your API route\r\n      const response = await fetch(`/api/patients/${patientId}`, {\r\n        headers: { \"x-user-id\": user.id },\r\n      });\r\n\r\n      console.log(\"API status:\", response.status);\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        if (!data.patient) {\r\n          console.warn(\"Patient object missing in response\");\r\n          setPatient(null); // Do not redirect yet\r\n          return;\r\n        }\r\n        console.log(\"Patient data:\", data.patient);\r\n        setPatient(data.patient);\r\n      } else if (response.status === 404) {\r\n        console.warn(\"Patient not found\");\r\n        setPatient(null); // safe handling\r\n      } else {\r\n        const text = await response.text();\r\n        console.error(\"Unexpected response:\", text);\r\n        setPatient(null); // safe handling\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching patient:\", error);\r\n      setPatient(null); // safe handling\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const canEditPatients = user && checkPermission(user.role, \"canEditPatients\");\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <LayoutWrapper>\r\n        <p className=\"text-center py-12 text-gray-500\">Loading patient details...</p>\r\n      </LayoutWrapper>\r\n    );\r\n  }\r\n\r\n  if (!patient) {\r\n    return (\r\n      <LayoutWrapper>\r\n        <p className=\"text-center py-12 text-red-500\">Patient not found or inaccessible.</p>\r\n      </LayoutWrapper>\r\n    );\r\n  }\r\n\r\n  const fullName = [patient.firstName, patient.middleName, patient.lastName]\r\n    .filter(Boolean)\r\n    .join(\" \");\r\n  const displayName = patient.suffix ? `${fullName} ${patient.suffix}` : fullName;\r\n\r\n  return (\r\n    <LayoutWrapper>\r\n      <div className=\"space-y-6\">\r\n        <button\r\n          className=\"flex items-center gap-2 text-gray-600 hover:text-gray-800\"\r\n          onClick={() => router.push(\"/patients\")}\r\n        >\r\n          <ArrowLeft size={18} /> Back to Patients\r\n        </button>\r\n\r\n        <h1 className=\"text-3xl font-bold text-[#8B3A3A]\">{displayName}</h1>\r\n        <p className=\"text-gray-600 mb-4\">ID: {patient.idNumber}</p>\r\n\r\n        {/* ... rest of your rendering code remains unchanged ... */}\r\n      </div>\r\n    </LayoutWrapper>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AASA;AAdA;;;;;;;AA6De,SAAS;IACtB,MAAM,SAAS,IAAA,8QAAS;IACxB,MAAM,SAAS,IAAA,8QAAS;IACxB,MAAM,YAAY,QAAQ;IAE1B,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gVAAQ,EAAiB;IACvD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,gVAAQ,EAAC;IAC3C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,gVAAQ,EAAM;IAEtC,IAAA,iVAAS,EAAC;QACR,MAAM,cAAc,IAAA,kIAAc;QAClC,IAAI,CAAC,aAAa;YAChB,QAAQ,IAAI,CAAC;YACb,OAAO,IAAI,CAAC;YACZ;QACF;QACA,QAAQ;IACV,GAAG,EAAE;IAEL,IAAA,iVAAS,EAAC;QACR,IAAI,QAAQ,WAAW;YACrB;QACF;IACF,GAAG;QAAC;QAAM;KAAU;IAEpB,MAAM,eAAe;QACnB,IAAI,CAAC,QAAQ,CAAC,WAAW;QAEzB,IAAI;YACF,aAAa;YAEb,QAAQ,GAAG,CAAC,6BAA6B;YAEzC,0CAA0C;YAC1C,MAAM,WAAW,MAAM,MAAM,CAAC,cAAc,EAAE,WAAW,EAAE;gBACzD,SAAS;oBAAE,aAAa,KAAK,EAAE;gBAAC;YAClC;YAEA,QAAQ,GAAG,CAAC,eAAe,SAAS,MAAM;YAE1C,IAAI,SAAS,EAAE,EAAE;gBACf,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,IAAI,CAAC,KAAK,OAAO,EAAE;oBACjB,QAAQ,IAAI,CAAC;oBACb,WAAW,OAAO,sBAAsB;oBACxC;gBACF;gBACA,QAAQ,GAAG,CAAC,iBAAiB,KAAK,OAAO;gBACzC,WAAW,KAAK,OAAO;YACzB,OAAO,IAAI,SAAS,MAAM,KAAK,KAAK;gBAClC,QAAQ,IAAI,CAAC;gBACb,WAAW,OAAO,gBAAgB;YACpC,OAAO;gBACL,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,QAAQ,KAAK,CAAC,wBAAwB;gBACtC,WAAW,OAAO,gBAAgB;YACpC;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2BAA2B;YACzC,WAAW,OAAO,gBAAgB;QACpC,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,kBAAkB,QAAQ,IAAA,mIAAe,EAAC,KAAK,IAAI,EAAE;IAE3D,IAAI,WAAW;QACb,qBACE,6WAAC,iJAAa;sBACZ,cAAA,6WAAC;gBAAE,WAAU;0BAAkC;;;;;;;;;;;IAGrD;IAEA,IAAI,CAAC,SAAS;QACZ,qBACE,6WAAC,iJAAa;sBACZ,cAAA,6WAAC;gBAAE,WAAU;0BAAiC;;;;;;;;;;;IAGpD;IAEA,MAAM,WAAW;QAAC,QAAQ,SAAS;QAAE,QAAQ,UAAU;QAAE,QAAQ,QAAQ;KAAC,CACvE,MAAM,CAAC,SACP,IAAI,CAAC;IACR,MAAM,cAAc,QAAQ,MAAM,GAAG,GAAG,SAAS,CAAC,EAAE,QAAQ,MAAM,EAAE,GAAG;IAEvE,qBACE,6WAAC,iJAAa;kBACZ,cAAA,6WAAC;YAAI,WAAU;;8BACb,6WAAC;oBACC,WAAU;oBACV,SAAS,IAAM,OAAO,IAAI,CAAC;;sCAE3B,6WAAC,iTAAS;4BAAC,MAAM;;;;;;wBAAM;;;;;;;8BAGzB,6WAAC;oBAAG,WAAU;8BAAqC;;;;;;8BACnD,6WAAC;oBAAE,WAAU;;wBAAqB;wBAAK,QAAQ,QAAQ;;;;;;;;;;;;;;;;;;AAM/D"}}]
}