{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/marienel/Downloads/clinic-management-system/lib/db.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\r\n\r\nconst globalForPrisma = global as unknown as { prisma: PrismaClient }\r\n\r\nexport const prisma =\r\n  globalForPrisma.prisma ||\r\n  new PrismaClient({\r\n    log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],\r\n  })\r\n\r\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\r\n\r\nexport default prisma\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM;AAEC,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK,uCAAyC;QAAC;QAAS;QAAS;KAAO,GAAG;AAC7E;AAEF,wCAA2C,gBAAgB,MAAM,GAAG;uCAErD"}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/marienel/Downloads/clinic-management-system/app/api/contacts/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\r\nimport prisma from '@/lib/db'\r\n\r\n// GET all contacts for the current user\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const userId = request.headers.get('x-user-id')\r\n    if (!userId) {\r\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\r\n    }\r\n\r\n    const contacts = await prisma.contact.findMany({\r\n      where: { userId },\r\n      orderBy: { createdAt: 'desc' }\r\n    })\r\n\r\n    return NextResponse.json({ contacts })\r\n  } catch (error) {\r\n    console.error('Get contacts error:', error)\r\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 })\r\n  }\r\n}\r\n\r\n// POST - Create a new contact\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const userId = request.headers.get('x-user-id')\r\n    if (!userId) return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\r\n\r\n    const { name, phone, email, relationship } = await request.json()\r\n\r\n    if (!name || !phone || !email) {\r\n      return NextResponse.json({ error: 'Missing required fields' }, { status: 400 })\r\n    }\r\n\r\n    const contact = await prisma.contact.create({\r\n      data: {\r\n        name,\r\n        phone,\r\n        email,\r\n        relationship,\r\n        userId\r\n      }\r\n    })\r\n\r\n    return NextResponse.json({ contact }, { status: 201 })\r\n  } catch (error) {\r\n    console.error('Create contact error:', error)\r\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 })\r\n  }\r\n}\r\n\r\n// PUT - Update a contact\r\nexport async function PUT(request: NextRequest) {\r\n  try {\r\n    const userId = request.headers.get('x-user-id')\r\n    if (!userId) return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\r\n\r\n    const { id, name, phone, email, relationship } = await request.json()\r\n    if (!id) return NextResponse.json({ error: 'Contact ID required' }, { status: 400 })\r\n\r\n    const contact = await prisma.contact.findUnique({ where: { id } })\r\n    if (!contact || contact.userId !== userId) {\r\n      return NextResponse.json({ error: 'Contact not found or unauthorized' }, { status: 404 })\r\n    }\r\n\r\n    const updatedContact = await prisma.contact.update({\r\n      where: { id },\r\n      data: {\r\n        name: name ?? contact.name,\r\n        phone: phone ?? contact.phone,\r\n        email: email ?? contact.email,\r\n        relationship: relationship ?? contact.relationship\r\n      }\r\n    })\r\n\r\n    return NextResponse.json({ contact: updatedContact })\r\n  } catch (error) {\r\n    console.error('Update contact error:', error)\r\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 })\r\n  }\r\n}\r\n\r\n// DELETE - Delete a contact\r\nexport async function DELETE(request: NextRequest) {\r\n  try {\r\n    const userId = request.headers.get('x-user-id')\r\n    if (!userId) return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\r\n\r\n    const { id } = await request.json()\r\n    if (!id) return NextResponse.json({ error: 'Contact ID required' }, { status: 400 })\r\n\r\n    const contact = await prisma.contact.findUnique({ where: { id } })\r\n    if (!contact || contact.userId !== userId) {\r\n      return NextResponse.json({ error: 'Contact not found or unauthorized' }, { status: 404 })\r\n    }\r\n\r\n    await prisma.contact.delete({ where: { id } })\r\n\r\n    return NextResponse.json({ success: true })\r\n  } catch (error) {\r\n    console.error('Delete contact error:', error)\r\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 })\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}}]
}