module.exports=[76479,a=>{"use strict";var b=a.i(2488),c=a.i(14983),d=a.i(7085),e=a.i(84980),f=a.i(31799),g=a.i(32267),h=a.i(25767),i=a.i(64600),j=a.i(97895);let k={CICT:["BSIT","BSCS","BSIS","BTVTED"],CBME:["BSA","BSAIS","BPA","BSE"]};function l(){let[a,l]=(0,h.useState)([]),[m,n]=(0,h.useState)(""),[o,p]=(0,h.useState)("all"),[q,r]=(0,h.useState)("name_az"),[s,t]=(0,h.useState)(!1),[u,v]=(0,h.useState)(null),[w,x]=(0,h.useState)([]),[y,z]=(0,h.useState)(null),[A,B]=(0,h.useState)(!0),[C,D]=(0,h.useState)(!1),[E,F]=(0,h.useState)([]),[G,H]=(0,h.useState)({firstName:"",middleName:"",lastName:"",suffix:"",dateOfBirth:"",gender:"Male",phone:"",email:"",address:"",role:"student",idNumber:"",program:"CICT",course:"",yearLevel:"",block:"",department:"",staffCategory:"",pastIllnesses:"",surgeries:"",currentMedication:"",allergies:"",medicalNotes:"",primaryContactName:"",primaryContactRelationship:"",primaryContactPhone:"",primaryContactAddress:"",secondaryContactName:"",secondaryContactRelationship:"",secondaryContactPhone:"",secondaryContactAddress:""});(0,h.useEffect)(()=>{let a=(0,i.getCurrentUser)();a&&z(a)},[]),(0,h.useEffect)(()=>{y&&I()},[y]),(0,h.useEffect)(()=>{G.program&&G.program in k&&(F(k[G.program]),k[G.program].includes(G.course)||H(a=>({...a,course:""})))},[G.program]);let I=async()=>{if(y)try{B(!0);let a=await fetch("/api/patients",{headers:{"x-user-id":y.id}});if(a.ok){let b=await a.json();l(b.patients||[])}}catch(a){console.error("Error fetching patients:",a)}finally{B(!1)}},J=y&&(0,i.checkPermission)(y.role,"canManagePatients"),K=y&&(0,i.checkPermission)(y.role,"canEditPatients"),L=a=>{let b=[a.firstName,a.middleName,a.lastName].filter(Boolean).join(" ");return a.suffix?`${b} ${a.suffix}`:b},M=a.filter(a=>L(a).toLowerCase().includes(m.toLowerCase())||a.idNumber.toLowerCase().includes(m.toLowerCase())).filter(a=>"all"===o||a.role===o).sort((a,b)=>"name_az"===q?L(a).localeCompare(L(b)):"name_za"===q?L(b).localeCompare(L(a)):"id_asc"===q?a.idNumber.localeCompare(b.idNumber):"id_desc"===q?b.idNumber.localeCompare(a.idNumber):0),N=a=>{let{name:b,value:c}=a.target;H(a=>({...a,[b]:c}))},O=async a=>{if(a.preventDefault(),!J||C)return;D(!0);let b=[];if(G.firstName.trim()?/^[a-zA-Z\s]*$/.test(G.firstName)||b.push("First name can only contain letters"):b.push("First name is required"),G.middleName&&!/^[a-zA-Z\s]*$/.test(G.middleName)&&b.push("Middle name can only contain letters"),G.lastName.trim()?/^[a-zA-Z\s]*$/.test(G.lastName)||b.push("Last name can only contain letters"):b.push("Last name is required"),G.suffix&&!/^[a-zA-Z\s]*$/.test(G.suffix)&&b.push("Suffix can only contain letters"),G.dateOfBirth||b.push("Date of birth is required"),G.phone?/^09\d{9}$/.test(G.phone)||b.push("Phone must start with 09 and be exactly 11 digits"):b.push("Contact number is required"),G.idNumber.trim()?/^[a-zA-Z0-9-]+$/.test(G.idNumber)||b.push("ID number can only contain letters, numbers, and dashes"):b.push("ID number is required"),"student"===G.role&&(G.program||b.push("Program is required for students"),G.course||b.push("Course is required for students"),G.yearLevel||b.push("Year level is required for students"),G.block||b.push("Block is required for students")),"teaching_staff"!==G.role||G.department||b.push("Program is required for teaching staff"),"non_teaching_staff"!==G.role||G.staffCategory||b.push("Category is required for non-teaching staff"),G.primaryContactName.trim()||b.push("Primary contact name is required"),G.primaryContactRelationship.trim()||b.push("Primary contact relationship is required"),G.primaryContactPhone.trim()?/^09\d{9}$/.test(G.primaryContactPhone)||b.push("Primary contact phone must start with 09 and be exactly 11 digits"):b.push("Primary contact phone number is required"),b.length>0)return void x(b);try{let a={firstName:G.firstName,middleName:G.middleName||void 0,lastName:G.lastName,suffix:G.suffix||void 0,dateOfBirth:G.dateOfBirth,gender:G.gender,phone:G.phone,email:G.email||void 0,address:G.address||void 0,role:G.role,idNumber:G.idNumber,..."student"===G.role&&{program:G.program,course:G.course,yearLevel:parseInt(G.yearLevel),block:parseInt(G.block)},..."teaching_staff"===G.role&&{department:G.department},..."non_teaching_staff"===G.role&&{staffCategory:G.staffCategory},pastIllnesses:G.pastIllnesses||void 0,surgeries:G.surgeries||void 0,currentMedication:G.currentMedication||void 0,allergies:G.allergies||void 0,medicalNotes:G.medicalNotes||void 0,primaryContactName:G.primaryContactName||void 0,primaryContactRelationship:G.primaryContactRelationship||void 0,primaryContactPhone:G.primaryContactPhone||void 0,primaryContactAddress:G.primaryContactAddress||void 0,secondaryContactName:G.secondaryContactName||void 0,secondaryContactRelationship:G.secondaryContactRelationship||void 0,secondaryContactPhone:G.secondaryContactPhone||void 0,secondaryContactAddress:G.secondaryContactAddress||void 0},b=u?{id:u,...a}:a,c=await fetch("/api/patients",{method:u?"PUT":"POST",headers:{"Content-Type":"application/json","x-user-id":y.id},body:JSON.stringify(b)}),d=await c.json();c.ok?((0,j.logActivity)("patient",u?`Updated patient: ${L(d.patient)}`:`Added new patient: ${L(d.patient)}`),await I(),P()):d.errors?x(d.errors):x(["Failed to save patient. Please try again."])}catch(a){console.error("Error saving patient:",a),x(["Failed to save patient. Please try again."])}finally{D(!1)}},P=()=>{v(null),H({firstName:"",middleName:"",lastName:"",suffix:"",dateOfBirth:"",gender:"Male",phone:"",email:"",address:"",role:"student",idNumber:"",program:"CICT",course:"",yearLevel:"",block:"",department:"",staffCategory:"",pastIllnesses:"",surgeries:"",currentMedication:"",allergies:"",medicalNotes:"",primaryContactName:"",primaryContactRelationship:"",primaryContactPhone:"",primaryContactAddress:"",secondaryContactName:"",secondaryContactRelationship:"",secondaryContactPhone:"",secondaryContactAddress:""}),F(k.CICT),x([]),t(!1)},Q=async a=>{if(confirm("Are you sure you want to delete this patient?"))try{(await fetch("/api/patients",{method:"DELETE",headers:{"Content-Type":"application/json","x-user-id":y.id},body:JSON.stringify({id:a})})).ok&&await I()}catch(a){console.error("Error deleting patient:",a)}};return(0,b.jsx)(c.LayoutWrapper,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-[#8B3A3A]",children:"Patients"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Manage school community member records"})]}),J&&(0,b.jsxs)("button",{onClick:()=>{t(!0),v(null),H({firstName:"",middleName:"",lastName:"",suffix:"",dateOfBirth:"",gender:"Male",phone:"",email:"",address:"",role:"student",idNumber:"",program:"CICT",course:"",yearLevel:"",block:"",department:"",staffCategory:"",pastIllnesses:"",surgeries:"",currentMedication:"",allergies:"",medicalNotes:"",primaryContactName:"",primaryContactRelationship:"",primaryContactPhone:"",primaryContactAddress:"",secondaryContactName:"",secondaryContactRelationship:"",secondaryContactPhone:"",secondaryContactAddress:""}),F(k.CICT)},className:"bg-[#8B3A3A] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#6D2E2E] flex items-center gap-2",children:[(0,b.jsx)(e.Plus,{size:20})," Add Patient"]})]}),(0,b.jsx)("div",{className:"bg-[#8B3A3A] rounded-xl p-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(d.Search,{className:"absolute left-4 top-3 text-white opacity-60",size:20}),(0,b.jsx)("input",{type:"text",placeholder:"Search by name or ID number...",value:m,onChange:a=>n(a.target.value),className:"w-full pl-12 pr-4 py-2 bg-white/20 text-white placeholder-white/60 rounded-lg focus:outline-none focus:ring-2 focus:ring-white"})]}),(0,b.jsxs)("select",{value:o,onChange:a=>p(a.target.value),className:"bg-white text-[#8B3A3A] px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-white font-medium cursor-pointer text-sm",children:[(0,b.jsx)("option",{value:"all",children:"All Patients"}),(0,b.jsx)("option",{value:"student",children:"Student"}),(0,b.jsx)("option",{value:"teaching_staff",children:"Teaching Staff"}),(0,b.jsx)("option",{value:"non_teaching_staff",children:"Non-teaching Staff"})]}),(0,b.jsxs)("select",{value:q,onChange:a=>r(a.target.value),className:"bg-white text-[#8B3A3A] px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-white font-medium cursor-pointer text-sm",children:[(0,b.jsx)("option",{value:"name_az",children:"Name: A-Z"}),(0,b.jsx)("option",{value:"name_za",children:"Name: Z-A"}),(0,b.jsx)("option",{value:"id_asc",children:"ID No: Ascending"}),(0,b.jsx)("option",{value:"id_desc",children:"ID No: Descending"})]})]})}),s&&J&&(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:u?"Edit Patient":"Add New Patient"}),(0,b.jsx)("button",{onClick:P,className:"text-gray-500 hover:text-gray-700",children:(0,b.jsx)(g.X,{size:24})})]}),w.length>0&&(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[(0,b.jsx)("h3",{className:"font-semibold text-red-800 mb-2",children:"Please fix the following errors:"}),(0,b.jsx)("ul",{className:"list-disc list-inside space-y-1",children:w.map((a,c)=>(0,b.jsx)("li",{className:"text-red-600 text-sm",children:a},c))})]}),(0,b.jsxs)("form",{onSubmit:O,className:"space-y-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 pb-2 border-b-2 border-[#8B3A3A]",children:"Personal Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold mb-2",children:["First Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",name:"firstName",value:G.firstName,onChange:N,placeholder:"Letters only",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Middle Name (Optional)"}),(0,b.jsx)("input",{type:"text",name:"middleName",value:G.middleName,onChange:N,placeholder:"Letters only",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold mb-2",children:["Last Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",name:"lastName",value:G.lastName,onChange:N,placeholder:"Letters only",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Suffix (Optional)"}),(0,b.jsx)("input",{type:"text",name:"suffix",value:G.suffix,onChange:N,placeholder:"e.g., Jr., Sr.",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold mb-2",children:["Gender ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{name:"gender",value:G.gender,onChange:N,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]",children:[(0,b.jsx)("option",{value:"Male",children:"Male"}),(0,b.jsx)("option",{value:"Female",children:"Female"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold mb-2",children:["Date of Birth ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"date",name:"dateOfBirth",value:G.dateOfBirth,onChange:N,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold mb-2",children:["Contact Number ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",name:"phone",value:G.phone,onChange:N,placeholder:"09xxxxxxxxx",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Email (Optional)"}),(0,b.jsx)("input",{type:"email",name:"email",value:G.email,onChange:N,placeholder:"email@example.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Address (Optional)"}),(0,b.jsx)("input",{type:"text",name:"address",value:G.address,onChange:N,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 pb-2 border-b-2 border-[#8B3A3A]",children:"School Information"}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold mb-2",children:["Role / Classification ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{name:"role",value:G.role,onChange:N,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]",children:[(0,b.jsx)("option",{value:"student",children:"student"}),(0,b.jsx)("option",{value:"teaching_staff",children:"teaching staff"}),(0,b.jsx)("option",{value:"non_teaching_staff",children:"non-teaching staff"})]})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold mb-2",children:["ID Number ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",name:"idNumber",value:G.idNumber,onChange:N,placeholder:"Letters, numbers, and dash (-) only",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"})]}),"student"===G.role&&(0,b.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold mb-2",children:["Program ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{name:"program",value:G.program,onChange:N,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]",children:[(0,b.jsx)("option",{value:"",children:"Select Program"}),(0,b.jsx)("option",{value:"CICT",children:"CICT"}),(0,b.jsx)("option",{value:"CBME",children:"CBME"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold mb-2",children:["Course ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{name:"course",value:G.course,onChange:N,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]",children:[(0,b.jsx)("option",{value:"",children:"Select Course"}),E.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold mb-2",children:["Year Level ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{name:"yearLevel",value:G.yearLevel,onChange:N,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]",children:[(0,b.jsx)("option",{value:"",children:"Select Year"}),(0,b.jsx)("option",{value:"1",children:"1st Year"}),(0,b.jsx)("option",{value:"2",children:"2nd Year"}),(0,b.jsx)("option",{value:"3",children:"3rd Year"}),(0,b.jsx)("option",{value:"4",children:"4th Year"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold mb-2",children:["Block ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{name:"block",value:G.block,onChange:N,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]",children:[(0,b.jsx)("option",{value:"",children:"Select Block"}),(0,b.jsx)("option",{value:"1",children:"Block 1"}),(0,b.jsx)("option",{value:"2",children:"Block 2"}),(0,b.jsx)("option",{value:"3",children:"Block 3"}),(0,b.jsx)("option",{value:"4",children:"Block 4"}),(0,b.jsx)("option",{value:"5",children:"Block 5"})]})]})]})]}),"teaching_staff"===G.role&&(0,b.jsx)("div",{className:"bg-green-50 p-4 rounded-lg",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold mb-2",children:["Program ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{name:"department",value:G.department,onChange:N,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]",children:[(0,b.jsx)("option",{value:"",children:"Select Program"}),(0,b.jsx)("option",{value:"CICT",children:"CICT"}),(0,b.jsx)("option",{value:"CBME",children:"CBME"})]})]})}),"non_teaching_staff"===G.role&&(0,b.jsx)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold mb-2",children:["Category ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{name:"staffCategory",value:G.staffCategory,onChange:N,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]",children:[(0,b.jsx)("option",{value:"",children:"Select Category"}),(0,b.jsx)("option",{value:"Administrative",children:"Administrative"}),(0,b.jsx)("option",{value:"Security",children:"Security"}),(0,b.jsx)("option",{value:"Maintenance",children:"Maintenance"}),(0,b.jsx)("option",{value:"Support",children:"Support"}),(0,b.jsx)("option",{value:"Clinic",children:"Clinic"})]})]})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 pb-2 border-b-2 border-[#8B3A3A]",children:"Medical History"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Past Illnesses"}),(0,b.jsx)("textarea",{name:"pastIllnesses",value:G.pastIllnesses,onChange:N,placeholder:"List any past illnesses...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Surgeries"}),(0,b.jsx)("textarea",{name:"surgeries",value:G.surgeries,onChange:N,placeholder:"List any past surgeries...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Current Medication"}),(0,b.jsx)("textarea",{name:"currentMedication",value:G.currentMedication,onChange:N,placeholder:"List current medications...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Allergies"}),(0,b.jsx)("textarea",{name:"allergies",value:G.allergies,onChange:N,placeholder:"List any allergies...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"})]})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Additional Notes"}),(0,b.jsx)("textarea",{name:"medicalNotes",value:G.medicalNotes,onChange:N,placeholder:"Any additional medical notes...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 pb-2 border-b-2 border-[#8B3A3A]",children:"Emergency Contacts"}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("h4",{className:"text-md font-semibold text-gray-700 mb-3",children:["Primary Contact ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold mb-2",children:["Full Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",name:"primaryContactName",value:G.primaryContactName,onChange:N,placeholder:"Full name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold mb-2",children:["Relationship ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",name:"primaryContactRelationship",value:G.primaryContactRelationship,onChange:N,placeholder:"e.g., Parent, Spouse, Sibling",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold mb-2",children:["Contact Number ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",name:"primaryContactPhone",value:G.primaryContactPhone,onChange:N,placeholder:"09xxxxxxxxx",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Address"}),(0,b.jsx)("input",{type:"text",name:"primaryContactAddress",value:G.primaryContactAddress,onChange:N,placeholder:"Address",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"})]})]})]})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h4",{className:"text-md font-semibold text-gray-700 mb-3",children:"Secondary Contact (Optional)"}),(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Full Name"}),(0,b.jsx)("input",{type:"text",name:"secondaryContactName",value:G.secondaryContactName,onChange:N,placeholder:"Full name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Relationship"}),(0,b.jsx)("input",{type:"text",name:"secondaryContactRelationship",value:G.secondaryContactRelationship,onChange:N,placeholder:"e.g., Parent, Spouse, Sibling",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Contact Number"}),(0,b.jsx)("input",{type:"text",name:"secondaryContactPhone",value:G.secondaryContactPhone,onChange:N,placeholder:"09xxxxxxxxx",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Address"}),(0,b.jsx)("input",{type:"text",name:"secondaryContactAddress",value:G.secondaryContactAddress,onChange:N,placeholder:"Address",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"})]})]})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 pb-2 border-b-2 border-[#8B3A3A]",children:"File Attachments"}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Upload Files"}),(0,b.jsx)("input",{type:"file",multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B3A3A]"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Accepted formats: PDF, DOC, DOCX, JPG, JPEG, PNG"})]})]}),(0,b.jsxs)("div",{className:"flex gap-4 pt-4 border-t border-gray-200",children:[(0,b.jsx)("button",{type:"submit",disabled:C,className:"bg-[#8B3A3A] text-white px-8 py-2 rounded-lg font-semibold hover:bg-[#6D2E2E] transition disabled:opacity-50 disabled:cursor-not-allowed",children:C?"Saving...":u?"Update Patient":"Add Patient"}),(0,b.jsx)("button",{type:"button",onClick:P,className:"bg-gray-200 text-gray-900 px-8 py-2 rounded-lg font-semibold hover:bg-gray-300 transition",children:"Cancel"})]})]})]}),(0,b.jsx)("div",{className:"space-y-4",children:A?(0,b.jsx)("div",{className:"text-center py-12",children:(0,b.jsx)("p",{className:"text-gray-500",children:"Loading patients..."})}):M.length>0?M.map(a=>{let c,d;return(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:(c=a.middleName?`${a.middleName.charAt(0)}. `:"",d=a.suffix?` ${a.suffix}`:"",`${a.lastName}, ${a.firstName} ${c}${d}`.trim())}),(0,b.jsxs)("div",{className:"mt-3 space-y-1 text-sm text-gray-600",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"ID:"})," ",a.idNumber]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Phone:"})," ",a.phone]}),a.email&&(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Email:"})," ",a.email]}),"student"===a.role&&a.course&&(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Course:"})," ",(a=>{if("student"!==a.role||!a.course||!a.yearLevel)return"";let b=a.course.match(/[A-Z]/g)?.join("")||a.course,c=a.block?` - ${a.block}`:"";return`(${b} ${a.yearLevel}${c})`})(a)]})]})]}),(0,b.jsx)("div",{className:"flex gap-2 ml-4",children:K&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{onClick:()=>{K&&(v(a.id),H({firstName:a.firstName,middleName:a.middleName||"",lastName:a.lastName,suffix:a.suffix||"",dateOfBirth:a.dateOfBirth,gender:a.gender,phone:a.phone,email:a.email||"",address:a.address||"",role:a.role,idNumber:a.idNumber,program:a.program||"CICT",course:a.course||"",yearLevel:a.yearLevel||"",block:a.block||"",department:a.department||"",staffCategory:a.staffCategory||"",pastIllnesses:a.pastIllnesses||"",surgeries:a.surgeries||"",currentMedication:a.currentMedication||"",allergies:a.allergies||"",medicalNotes:a.medicalNotes||"",primaryContactName:a.primaryContactName||"",primaryContactRelationship:a.primaryContactRelationship||"",primaryContactPhone:a.primaryContactPhone||"",primaryContactAddress:a.primaryContactAddress||"",secondaryContactName:a.secondaryContactName||"",secondaryContactRelationship:a.secondaryContactRelationship||"",secondaryContactPhone:a.secondaryContactPhone||"",secondaryContactAddress:a.secondaryContactAddress||""}),a.program&&F(k[a.program]),t(!0),x([]))},className:"bg-[#8B3A3A] text-white px-4 py-2 rounded-lg font-semibold hover:bg-[#6D2E2E] flex items-center gap-2 transition",children:[(0,b.jsx)(f.Edit2,{size:18})," Edit"]}),(0,b.jsx)("button",{onClick:()=>Q(a.id),className:"bg-red-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-red-600 transition",children:"Delete"})]})})]})},a.id)}):(0,b.jsx)("div",{className:"text-center py-12",children:(0,b.jsx)("p",{className:"text-gray-500",children:"No patients found"})})})]})})}a.s(["default",()=>l])}];

//# sourceMappingURL=app_%28dashboard%29_patients_page_tsx_9af43ba3._.js.map