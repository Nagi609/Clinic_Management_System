{"version":3,"sources":["../../../../node_modules/.pnpm/next%4016.0.8_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/.pnpm/next%4016.0.8_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../node_modules/.pnpm/next%4016.0.8_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/.pnpm/next%4016.0.8_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/.pnpm/next%4016.0.8_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/.pnpm/next%4016.0.8_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../lib/constants.ts","../../../../app/%28dashboard%29/layout.tsx","../../../../hooks/use-database-init.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","export const ROLE_PERMISSIONS = {\n  student: {\n    canManagePatients: false,\n    canEditPatients: false,\n    canViewMonitoring: true,\n    canEditProfile: true,\n  },\n  clinic_staff: {\n    canManagePatients: true,\n    canEditPatients: true,\n    canViewMonitoring: true,\n    canEditProfile: true,\n  },\n  admin: {\n    canManagePatients: true,\n    canEditPatients: true,\n    canViewMonitoring: true,\n    canEditProfile: true,\n  },\n}\n\n/**\n * Get the currently logged-in user from localStorage\n * Returns null if no user is logged in\n */\nexport const getCurrentUser = () => {\n  if (typeof window === \"undefined\") return null\n  try {\n    const user = localStorage.getItem(\"user\")\n    return user ? JSON.parse(user) : null\n  } catch (error) {\n    console.error(\"Failed to parse user from localStorage:\", error)\n    return null\n  }\n}\n\n/**\n * Save user to localStorage securely\n */\nexport const setCurrentUser = (user: { id: string; role: string }) => {\n  if (typeof window === \"undefined\") return\n  localStorage.setItem(\"user\", JSON.stringify(user))\n}\n\n/**\n * Remove user from localStorage (logout)\n */\nexport const removeCurrentUser = () => {\n  if (typeof window === \"undefined\") return\n  localStorage.removeItem(\"user\")\n}\n\n/**\n * Check if the user's role has a specific permission\n */\nexport const checkPermission = (\n  role: string,\n  permission: keyof typeof ROLE_PERMISSIONS.student\n): boolean => {\n  return ROLE_PERMISSIONS[role as keyof typeof ROLE_PERMISSIONS]?.[permission] ?? false\n}\n","\"use client\"\n\nimport type React from \"react\"\n\nimport { useEffect } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { useDatabaseInit } from \"@/hooks/use-database-init\"\n\nexport default function DashboardLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  const router = useRouter()\n  useDatabaseInit()\n\n  useEffect(() => {\n    const user = localStorage.getItem(\"user\")\n    if (!user) {\n      router.push(\"/login\")\n    }\n  }, [router])\n\n  return <>{children}</>\n}\n","import { useEffect } from 'react'\r\nimport { getCurrentUser } from '@/lib/constants'\r\n\r\n// This hook ensures the database is initialized by making a simple API call\r\nexport function useDatabaseInit() {\r\n  useEffect(() => {\r\n    const initializeDatabase = async () => {\r\n      try {\r\n        const user = getCurrentUser()\r\n        if (user) {\r\n          // Make a simple API call to trigger database initialization\r\n          await fetch('/api/patients', {\r\n            headers: { 'x-user-id': user.id },\r\n          }).catch(() => {\r\n            // Ignore errors - we just need to trigger initialization\r\n          })\r\n        }\r\n      } catch (error) {\r\n        // Silently fail - this is just for initialization\r\n        console.debug('Database initialization attempted')\r\n      }\r\n    }\r\n\r\n    initializeDatabase()\r\n  }, [])\r\n}\r\n"],"names":["module","exports","require","vendored","ReactJsxRuntime","React","AppRouterContext","HooksClientContext","ServerInsertedHtml","process","env","NEXT_RUNTIME","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"4CAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,YAAY,CAAEC,eAAe,+BCFxCJ,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,YAAY,CAAEE,KAAK,+BCF9BL,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACG,gBAAgB,+BCFvCN,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACI,kBAAkB,+BCFzCP,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACK,kBAAkB,+sBCwBjCR,EAAOC,OAAO,CAAGC,EAAQ,CAAA,CAAA,IAAA,2BC1B1B,IAAM,EAAmB,CAC9B,QAAS,CACP,mBAAmB,EACnB,iBAAiB,EACjB,kBAAmB,GACnB,gBAAgB,CAClB,EACA,aAAc,CACZ,mBAAmB,EACnB,iBAAiB,EACjB,mBAAmB,EACnB,gBAAgB,CAClB,EACA,MAAO,CACL,mBAAmB,EACnB,gBAAiB,GACjB,mBAAmB,EACnB,gBAAgB,CAClB,CACF,2BAoC+B,CAC7B,EACA,IAEO,CAAgB,CAAC,EAAsC,EAAE,CAAC,EAAW,GAAI,qBAlCpD,IACc,+CCtB5C,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OCJA,EAAA,EAAA,CAAA,CAAA,ODOe,SAAS,EAAgB,CACtC,UAAQ,CAGT,EACC,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAUxB,MClBA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAkBR,CAjB2B,UACzB,GAAI,CACF,IAAM,EAAO,CAAA,EAAA,EAAA,cAAA,AAAc,IACvB,GAEF,GAFQ,GAEF,MAAM,gBAAiB,CAC3B,QAAS,CAAE,YAAa,EAAK,EAAG,AAAD,CACjC,GAAG,KAAK,CAAC,KAET,EAEJ,CAAE,MAAO,EAAO,CAEd,QAAQ,KAAK,CAAC,oCAChB,EACF,GAGF,EAAG,EAAE,EDRL,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACK,AACT,CAAC,MAAM,MADe,OAAO,CAAC,SAEhC,EAAO,IAAI,CAAC,SAEhB,EAAG,CAAC,EAAO,EAEJ,CAAA,EAAA,EAAA,GAAA,EAAA,EAAA,QAAA,CAAA,UAAG,GACZ","ignoreList":[0,1,2,3,4,5]}